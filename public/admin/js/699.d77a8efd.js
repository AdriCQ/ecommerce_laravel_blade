"use strict";(self["webpackChunkecommerce_admin"]=self["webpackChunkecommerce_admin"]||[]).push([[699],{9544:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var l=a(3673),n=a(8880);const i=(0,l._)("div",{class:"text-h6"},"Mis Destinos",-1),o={class:"row q-gutter-sm"},s={class:"col-xs-12 col-sm-3"},u=(0,l._)("div",{class:"text-subtitle2"},"Nuevo Destino",-1);function r(e,t,a,r,d,c){const m=(0,l.up)("q-card-section"),p=(0,l.up)("q-icon"),f=(0,l.up)("q-card"),v=(0,l.up)("destination-widget"),w=(0,l.up)("q-chip"),b=(0,l.up)("q-input"),g=(0,l.up)("q-btn"),D=(0,l.up)("q-card-actions"),_=(0,l.up)("q-form"),k=(0,l.up)("q-dialog"),q=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(q,{padding:"",class:"q-gutter-y-xs"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"text-grey-9"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l._)("div",s,[(0,l.Wm)(f,{class:"cursor-pointer",onClick:e.newDest},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"text-h6 text-center"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(p,{size:"md",name:"mdi-plus"})]),u])),_:1})])),_:1},8,["onClick"])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.destinations,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"col-xs-12 col-sm-3",key:`dest-${a}`},[(0,l.Wm)(v,{class:"cursor-pointer",destination:t,onClick:a=>e.editDest(t)},null,8,["destination","onClick"])])))),128))])])),_:1})])),_:1}),(0,l.Wm)(k,{modelValue:e.editDestinationPopup,"onUpdate:modelValue":t[3]||(t[3]=t=>e.editDestinationPopup=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{style:{"min-width":"20rem",width:"30rem"}},{default:(0,l.w5)((()=>["update"===e.formMode?((0,l.wg)(),(0,l.j4)(m,{key:0,class:"q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{style:{"z-index":"100"},clickable:"",class:"float-right","text-color":"negative",icon:"mdi-delete",label:"Eliminar",onClick:t[0]||(t[0]=t=>e.remove(e.form.id))})])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(_,{onSubmit:(0,n.iM)(e.onSubmit,["prevent"]),class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.name=t),type:"text",label:"Nombre"},null,8,["modelValue"]),(0,l.Wm)(b,{modelValue:e.form.price,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.price=t),type:"number",min:"0",step:"0.01",label:"Precio"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{label:""+("create"===e.formMode?"Crear":"Actualizar"),type:"submit",color:"primary","text-color":"dark"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var d=a(1959),c=a(8872),m=a(8825),p=a(9582),f=a(1239);const v=(0,l.aZ)({name:"DestinationsPage",components:{"destination-widget":(0,l.RC)((()=>a.e(778).then(a.bind(a,5778))))},setup(){const e=(0,c.Ey)(c.xj),t=(0,m.Z)(),a=(0,p.tv)(),{errorHandler:n,deleteDialog:i}=(0,f.y)(t,a);(0,l.wF)((()=>{e.listDestination()}));const o=(0,d.Fl)((()=>e.destinations)),s=(0,d.iH)(!1),u=(0,d.iH)({name:"",price:0}),r=(0,d.iH)("update");function v(e){u.value=e,r.value="update",s.value=!0}function w(){u.value={name:"",price:0},r.value="create",s.value=!0}function b(){switch(r.value){case"create":e.createDestination(u.value).catch((e=>{n(e,"Error al crear destino")})).finally((()=>{s.value=!1}));break;case"update":e.updateDestination(Number(u.value.id),u.value).catch((e=>{n(e,"Error al actualizar destino")})).finally((()=>{s.value=!1}));break}}function g(t){t&&i({title:"Eliminar Destino",message:"¿Está seguro que desea eliminar el destino?",onOk:()=>{e.deleteDestination(t).finally((()=>{s.value=!1}))}})}return{destinations:o,editDestinationPopup:s,form:u,formMode:r,editDest:v,newDest:w,onSubmit:b,remove:g}}});var w=a(4260),b=a(4379),g=a(151),D=a(5589),_=a(4554),k=a(6778),q=a(7030),W=a(5269),y=a(4842),h=a(9367),x=a(2165),C=a(7518),Z=a.n(C);const Q=(0,w.Z)(v,[["render",r]]),V=Q;Z()(v,"components",{QPage:b.Z,QCard:g.Z,QCardSection:D.Z,QIcon:_.Z,QDialog:k.Z,QChip:q.Z,QForm:W.Z,QInput:y.Z,QCardActions:h.Z,QBtn:x.Z})}}]);