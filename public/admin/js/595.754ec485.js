"use strict";(self["webpackChunkecommerce_admin"]=self["webpackChunkecommerce_admin"]||[]).push([[595],{3595:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var o=a(3673),t=a(8880),n=a(2323);const r=(0,o._)("div",{class:"text-h6 text-grey-9"},"Colaboradores",-1),u={class:"row q-col-gutter-sm"},i={class:"col-xs-12 col-sm-3"},d=(0,o._)("div",{class:"text-subtitle2"},"Nuevo Colaborador",-1),c={class:"text-body1 text-center text-grey-9"};function m(e,l,a,m,s,p){const f=(0,o.up)("q-card-section"),v=(0,o.up)("q-icon"),b=(0,o.up)("q-card"),g=(0,o.up)("user-widget"),w=(0,o.up)("q-input"),y=(0,o.up)("q-btn"),_=(0,o.up)("q-card-actions"),C=(0,o.up)("q-form"),W=(0,o.up)("q-dialog"),h=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(h,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",i,[(0,o.Wm)(b,{class:"cursor-pointer text-grey-9 text-center",onClick:e.create},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,{size:"sm",name:"mdi-account-plus"}),d])),_:1})])),_:1},8,["onClick"])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.users,((l,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"col-xs-12 col-sm-3",key:`user-${a}`},[(0,o.Wm)(g,{class:"cursor-pointer",user:l,onClick:a=>e.update(Number(l.id),l)},null,8,["user","onClick"])])))),128))])])),_:1})])),_:1}),(0,o.Wm)(W,{modelValue:e.popup,"onUpdate:modelValue":l[4]||(l[4]=l=>e.popup=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{style:{"min-width":"20rem"}},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{onSubmit:(0,t.iM)(e.onSubmit,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",c,(0,n.zw)("create"===e.mode?"Nuevo":"Modificar")+" Colaborador",1)])),_:1}),(0,o.Wm)(f,{class:"q-gutter-y-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form.name=l),type:"text",label:"Nombre"},null,8,["modelValue"]),(0,o.Wm)(w,{modelValue:e.form.email,"onUpdate:modelValue":l[1]||(l[1]=l=>e.form.email=l),type:"email",label:"Email"},null,8,["modelValue"]),(0,o.Wm)(w,{modelValue:e.form.phone,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.phone=l),type:"tel",label:"Teléfono"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{type:"submit",loading:e.loading,color:"primary","text-color":"dark",label:""+("create"===e.mode?"Crear":"Modificar")},null,8,["loading","label"]),"update"===e.mode?((0,o.wg)(),(0,o.j4)(y,{key:0,loading:e.loading,color:"negative",label:"Eliminar",icon:"mdi-delete",onClick:l[3]||(l[3]=l=>e.remove(Number(e.form.id)))},null,8,["loading"])):(0,o.kq)("",!0)])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1})}var s=a(1959),p=a(8825),f=a(9582),v=a(8872),b=a(1239);const g=(0,o.aZ)({name:"UsersPage",components:{"user-widget":(0,o.RC)((()=>a.e(635).then(a.bind(a,635))))},setup(){const e=(0,v.Ey)(v.Qw),l=(0,p.Z)(),a=(0,f.tv)(),{errorHandler:t,deleteDialog:n}=(0,b.y)(l,a);(0,o.wF)((()=>{e.listAction().catch((e=>{t(e,"Error listando usuarios")}))}));const r=(0,s.iH)({email:"",name:"",phone:""}),u=(0,s.iH)(!1),i=(0,s.iH)("update"),d=(0,s.iH)(!1),c=(0,s.Fl)((()=>e.collaborators));function m(){i.value="create",r.value={email:"",name:"",phone:""},d.value=!0}function g(l){n({title:"Eliminar Colaborador",message:"¿Está seguro que desea eliminar el colaborador?",onOk:()=>{u.value=!0,e.deleteAction(l).catch((e=>{t(e,"Error eliminando colaborador")})).finally((()=>{d.value=!1,u.value=!1}))}})}function w(){u.value=!0,"create"===i.value?e.createAction(r.value).then((()=>{l.notify({type:"positive",message:"Colaborador creado",icon:"mdi-account-plus",position:"center"})})).catch((e=>{t(e,"Error creando colaborador")})).finally((()=>{d.value=!1,u.value=!1})):e.updateAction(Number(r.value.id),r.value).then((()=>{l.notify({type:"positive",message:"Colaborador Actualizado",icon:"mdi-account-plus",position:"center"})})).catch((e=>{t(e,"Error actualizando colaborador")})).finally((()=>{d.value=!1,u.value=!1}))}function y(e,l){i.value="update",r.value=l,d.value=!0}return{form:r,loading:u,mode:i,popup:d,users:c,create:m,onSubmit:w,remove:g,update:y}}});var w=a(4260),y=a(4379),_=a(151),C=a(5589),W=a(4554),h=a(6778),k=a(5269),q=a(4842),x=a(9367),V=a(2165),Z=a(7518),Q=a.n(Z);const E=(0,w.Z)(g,[["render",m]]),A=E;Q()(g,"components",{QPage:y.Z,QCard:_.Z,QCardSection:C.Z,QIcon:W.Z,QDialog:h.Z,QForm:k.Z,QInput:q.Z,QCardActions:x.Z,QBtn:V.Z})}}]);