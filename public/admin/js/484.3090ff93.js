"use strict";(self["webpackChunkecommerce_admin"]=self["webpackChunkecommerce_admin"]||[]).push([[484],{1484:(e,a,o)=>{o.r(a),o.d(a,{default:()=>v});var n=o(3673);function t(e,a,o,t,l,r){const i=(0,n.up)("q-uploader"),c=(0,n.up)("q-card-section"),d=(0,n.up)("q-btn"),s=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,{factory:e.factoryFn,label:"Cambiar Imagen Principal",accept:"image/*",onFactoryFailed:e.factoryFail,onFailed:e.factoryFail,onUploaded:e.onUploaded},null,8,["factory","onFactoryFailed","onFailed","onUploaded"])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,{factory:e.galleryFactoryFn,label:"Subir Galería",accept:"image/*",multiple:"","max-files":"4",onFactoryFailed:e.factoryFail,onFailed:e.factoryFail,onUploaded:e.onUploaded},null,8,["factory","onFactoryFailed","onFailed","onUploaded"])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{color:"primary",class:"full-width","text-color":"dark",icon:"mdi-delete",label:"Eliminar Galería",onClick:e.removeGallery},null,8,["onClick"])])),_:1})])),_:1})}var l=o(1959),r=o(1768),i=o(8872),c=o(8825),d=o(9582),s=o(9140);const u=(0,n.aZ)({name:"Imagesproduct",emits:["update-product"],props:{product:{type:Object,required:!0}},setup(e,a){const{product:o}=(0,l.BK)(e),n=(0,i.Ey)(i.Qw),t=(0,c.Z)(),u=(0,d.tv)(),m=(0,i.Ey)(i.xj);function p(){return new Promise((e=>{setTimeout((()=>{e({url:`${r.baseURL}/api/products/${o.value.id}/image`,method:"POST",headers:[{name:"Authorization",value:`Bearer ${n.apiToken}`}],fieldName:"image"})}),200)}))}function y(){return new Promise((e=>{setTimeout((()=>{e({url:`${r.baseURL}/api/products/${o.value.id}/gallery`,method:"POST",headers:[{name:"Authorization",value:`Bearer ${n.apiToken}`}],fieldName:"image"})}),200)}))}function f(e){const o=e.xhr;o.response&&o.response.id&&a.emit("update-product",o.response),t.notify({message:"Imagen Guardada",type:"positive",position:"center",actions:[{icon:"mdi-close",color:"white",handler:()=>{}}]}),u.push({name:s.I.PRODUCTS})}function F(e){console.log(e)}function h(){m.deleteProductGallery(Number(o.value.id)).then((()=>{t.notify({message:"Galería Eliminada",type:"positive",position:"center",actions:[{icon:"mdi-close",color:"white",handler:()=>{}}]})})).catch((()=>{t.notify({message:"No se pudo eliminar",type:"negative",position:"center",actions:[{icon:"mdi-close",color:"white",handler:()=>{}}]})}))}return Object.assign(Object.assign({},e),{baseURL:r.baseURL,factoryFn:p,factoryFail:F,onUploaded:f,galleryFactoryFn:y,removeGallery:h})}});var m=o(4260),p=o(151),y=o(5589),f=o(1745),F=o(2165),h=o(7518),g=o.n(h);const b=(0,m.Z)(u,[["render",t]]),v=b;g()(u,"components",{QCard:p.Z,QCardSection:y.Z,QUploader:f.Z,QBtn:F.Z})}}]);